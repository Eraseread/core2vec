import json
import matplotlib.pyplot as plt
from sklearn.decomposition import PCA
from matplotlib.font_manager import FontProperties

                            
#words = ["DESSERT", "FOOD", "WINE", "LAMP", "BULB", "LIGHT", "STUDENT", "TEACHER"]
words = ["VEHICLE","CAR", "TRAIN", "PLANE", "FLY", "AIR", "GROUND"]


dict = json.load(open("newdict.txt"))
#print dict

print len(words)

indices = []
labels_dic = {}
for word in words:
    indices.append(dict[word])
    labels_dic[dict[word]] = word
    

word_vecs = {}
with open('emb/newGcore.txt') as file:
     header = 0
     for line in file:
             if header == 0:
                     header=1
                     continue
             first = 1
             index = 0
             for digit in line.split():
                     if first==1:
                             first = 0
                             index = int(digit)
                             #print(index)
                             continue
                     if index in word_vecs:
                             word_vecs[index].append(float(digit))
                             continue
                     elif index in indices:
                            word_vecs[index] = [float(digit)]


print word_vecs

vec_list = []
for index in word_vecs:
    vec_list.append(word_vecs[index])

label_list = []
for index in word_vecs:
    label_list.append(labels_dic[index])
    
##word_vecs = []
##for word in words:
##    word_vecs.append(node_vec[dict[word]])

#loaded_vecs = [[-0.046134, 0.068015, 0.136301, -0.55101, 0.028986, -0.655638, -0.528151, -0.890108, 0.235637, -0.402021, -0.500761, 0.634488, -0.099699, -0.81131, -0.349383, -0.431031, 0.548288, 0.127576, 1.135891, -0.558062, -0.625685, -0.15213, -0.30049, 0.7802, 0.580898, -0.59748, -0.119453, 0.822087, -0.192307, 0.466184, 0.461955, 0.607707, 0.324062, -0.102145, 0.90569, 0.132593, 0.150312, -0.1912, -0.664667, -1.294438, -0.348476, 0.757754, 0.389217, -1.124572, -0.149765, 0.154546, 0.466543, 1.405257, -1.123087, 0.417502, 0.211601, -0.048249, 0.87052, -0.76642, 0.354315, -0.227054, 1.033469, -0.557835, -0.582895, 0.849966, -0.415936, 0.333124, 0.736408, -0.308826], [-0.001363, -0.110772, 0.320708, -0.189043, 0.082139, -0.312097, 0.057663, -0.826952, 0.2319, -0.231326, -0.070541, 0.577735, -0.409684, -0.772263, -0.194123, -0.702977, 0.297604, 0.577533, 1.061864, -0.267245, -0.396636, -0.489703, -0.190774, 0.560795, 0.806141, -0.82327, -0.141237, 0.277167, 0.197014, 0.638745, 0.017991, 0.500661, 0.281236, -0.169468, 0.489537, -0.098026, 0.025768, -0.11605, -0.710575, -0.614605, -0.160551, 0.876798, 0.142355, -0.807798, -0.012744, 0.12443, 0.33441, 0.669155, -1.029711, 0.414674, -0.077351, 0.357136, 0.95102, -0.332954, -0.301173, -0.133823, 0.696778, -0.174832, -0.480753, 0.120396, -0.189505, 0.455579, 0.422273, -0.274542], [0.710895, -0.166015, 0.316998, -0.295955, -0.575426, -1.058316, 0.406033, -0.208383, 0.192003, -0.03675, -0.104887, -0.696301, -0.887508, -0.417062, 0.172054, -0.633163, -0.110731, 0.124256, 0.177848, -0.576271, 0.226231, 0.189671, 0.148964, 0.626542, -0.052361, -0.008611, -0.221258, -0.183689, 0.000916, 0.427031, -0.302505, -0.75682, -0.072453, -0.164734, 0.54647, -0.433298, 0.399601, -0.019762, -0.911162, -1.457544, -0.435487, -0.046383, 0.707211, -0.419666, 0.692841, -0.099594, 0.279642, 1.066147, -0.621638, -0.570668, 0.358367, 0.808639, 0.305671, -0.357361, 0.375268, 0.380263, 0.481144, -0.078991, -0.250874, 0.990576, 0.090369, -0.345461, 0.544368, -0.331464], [0.225714, -0.070836, 0.148818, -0.089385, -0.137567, -0.040737, 0.039534, -0.16321, -0.045354, -0.026164, 0.166064, 0.027657, -0.167072, -0.18234, 0.110126, -0.25356, 0.080635, 0.023607, 0.12765, -0.08504, -0.156337, -0.174839, -0.023686, 0.001831, 0.141567, -0.075668, 0.142174, -0.074201, 0.053639, -0.004159, -0.030978, -0.093444, -0.017898, -0.193008, 0.084818, -0.137943, 0.141954, -0.213677, -0.172701, -0.067735, 0.061229, 0.026619, 0.040818, -0.090703, 0.196199, 0.075906, 0.167111, 0.064159, -0.381974, -0.12724, 0.022446, 0.230355, 0.264608, 0.046573, 0.081685, -0.151684, 0.097828, -0.184302, -0.197683, 0.166678, -0.054868, 0.006022, 0.212624, -0.100672], [-0.124523, -0.362302, 0.629578, -0.608114, -0.222776, 0.217032, 0.712795, -0.881381, -0.099137, -0.388248, 0.118331, -0.213901, -0.786532, -0.364446, 0.935513, 0.145337, 0.094619, 0.112839, -0.435162, -0.597076, -0.288582, 0.243628, 0.52303, 0.749461, -0.694203, 0.314572, 0.277614, 0.20698, 0.067868, 0.189754, 0.105228, 0.236336, 0.169002, -0.519567, 0.911783, 0.639903, 0.267109, -0.093654, -0.328016, -0.298907, -0.196205, 0.250907, -0.047417, -1.594988, 0.727873, 0.670442, 0.657767, 0.700066, -0.216224, -0.256334, -0.139959, -0.190785, 0.353021, 0.454742, 0.423665, -0.264067, 0.163958, -0.564617, -0.294285, 1.245016, -0.327324, -0.108147, 0.839745, -0.144665], [-0.338477, -1.192015, 0.339485, -0.398367, 0.239072, -0.120139, 0.81636, -1.38393, 0.00184, -0.610547, -0.171312, 0.811159, -0.373799, -0.443317, 0.598674, 0.42592, 1.262605, 0.640903, -0.379097, -0.017985, 0.101533, 0.042206, 0.316116, 1.485028, 0.165126, 0.749855, 0.551026, 0.034313, -0.21212, -0.764203, 0.821095, -0.284008, -0.04581, 0.308375, 1.221449, 1.035169, -0.044015, 0.224566, -0.162993, -0.550202, -0.876171, 0.37066, -0.239044, -0.661139, 0.445923, -0.127678, 0.038027, 0.649722, -0.456429, 0.120547, -1.019723, 0.829504, 0.887172, 0.386803, 0.759848, -0.501671, 0.466926, -1.011537, -0.367243, 0.93348, -0.423503, -0.194686, 0.231872, 0.256107], [0.196305, -1.462826, -0.102519, -0.09258, 0.172831, -0.475752, 1.168381, -1.430255, -0.305103, -0.628897, 0.062818, 0.129335, 0.240527, -0.432405, 0.428548, 0.774598, 0.438805, 0.018745, -0.407154, 0.030506, -0.062215, -0.251417, 0.202466, 0.920793, -0.377385, 0.648558, 0.766875, -0.096014, -0.143049, -0.143434, 0.884295, -0.41074, -0.037245, -0.429029, 0.317542, 0.697891, 0.403906, 0.434482, -0.443553, -0.666672, 0.128746, 0.152799, 0.060405, -0.014216, 0.179535, 0.113793, -0.202823, 0.923355, -1.021069, 0.383029, -0.406027, 0.747968, 0.654528, 0.225776, 0.825011, -0.299983, 0.574051, -0.478334, -0.815907, 0.503312, -0.727335, -0.704374, -0.51686, 0.029669]]

pca = PCA(n_components=2)
new_vecs = pca.fit_transform(vec_list)

plt.scatter(new_vecs[:,0], new_vecs[:,1])

fontP = FontProperties()
fontP.set_size('x-small')

for i, txt in enumerate(label_list):
    plt.annotate(txt, (new_vecs[i][0],new_vecs[i][1]), FontProperties = fontP)


plt.show()
    
